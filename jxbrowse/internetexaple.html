<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<title>Google Maps JavaScript API v3 Example: Directions Complex</title>

		<style>
			html {
				height: 100%;
			}
			body {
				height: 100%;
				margin: 0px;
				font-family: Helvetica, Arial;
			}
		</style>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="https://cdn.rawgit.com/geocodezip/geoxml3/master/polys/geoxml3.js"></script>
		<script type="text/javascript" src="https://cdn.rawgit.com/geocodezip/geoxml3/master/ProjectedOverlay.js"></script>

		<script type="text/javascript">
			jQuery(document).ready(function() {
				var myOptions = {
					center : new google.maps.LatLng(39.397, -100.644),
					zoom : 4,
					mapTypeId : google.maps.MapTypeId.ROADMAP
				};
				var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

				var geoXml = new geoXML3.parser({
					map : map,
					singleInfoWindow : true,
					afterParse : useTheData
				});
				geoXml.parse('GWREGION.kml');

				// alert("done init");
			});
			function useTheData(doc) {
				// Geodata handling goes here, using JSON properties of the doc object
				for (var i = 0; i < doc[0].markers.length; i++) {
					// console.log(doc[0].markers[i].title);
					jQuery('#map_text').append(doc[0].markers[i].title + ', ');
				}
			};
		</script>

	</head>
	<body >
		<form id="form1">

			<div id="map_canvas" style="width:600px;height:500px;"></div>

			<div id="map_text"></div>
		</form>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
		<script type="text/javascript">
			_uacct = "UA-162157-1";
			urchinTracker();
		</script>
	</body>
</html>
